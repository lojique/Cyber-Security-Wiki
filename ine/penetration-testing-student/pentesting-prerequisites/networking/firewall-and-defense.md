# Firewall & Defense

## Packet Filtering Firewalls

* The most basic feature of a firewall is <mark style="color:red;">**packet filtering**</mark>
  * An admin can create rules which will filter packets according to certain characteristics like:
    1. Source IP/Destination IP
    2. Source/Destination Port
    3. Protocol
* Packet filters inspect the header of every packet to choose how to treat the packet. The more common actions are:
  * <mark style="color:red;">**Allow**</mark>: allow the packet to pass
  * <mark style="color:red;">**Drop**</mark>: drops the packet without any diagnostic message to the packet source host
  * <mark style="color:red;">**Deny**</mark>: do not let the packet pass, but notify the source host

## Application Layer Firewalls

* Check all the OSI 7 layers
* Inspect the actual content of a packet, not just its headers
  * Can drop any peer-to-peer application packet
  * Prevent users from visiting a site

## IDS

* Used for detecting ongoing intrusions by checking for attack vectors like ping sweeps, port scans, SQLi, buffer overflows and so on
* Can also identify traffic generation by a virus or a worm
* Detects risky traffic by means of signatures (no signatures, no detections)
* Detection is performed by sensors, software components that inspect network traffic
  * Passively intercept intrusions and communicate them to the IDS manager, software in charge of maintaining policies and provides a management console to the sysadmin
* Two categories of IDSs
  * Network IDS
    * Inspect network traffic by means of sensors which are usually placed on a router or in a network with a high intrusion risk, like a DMZ
  * Host IDS
    * Sensors monitor application logs, file-system changes and changes to the OS config

## IPS

* Intrusion Prevention Systems can drop malicious requests when the threat has a risk classification above a pre-defined threshold

## NAT and Masquerading

* Network Address Translation and IP Masquerading are 2 techniques used to provide access to a network from another network

![](<../../../../.gitbook/assets/image (4) (1) (1) (1) (1) (1) (1).png>)

![](<../../../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1).png>)

* Every machine inside _Network A_ will use the NAT device as its default gateway, thus routing its internet traffic through it. The NAT device then rewrites the source IP address of every packet setting it to 72.65.2.78 in the example images above, thus masquerading the original client's IP address
* A machine on the internet will never know the original client's IP address
